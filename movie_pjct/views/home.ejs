<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Movie Manager â€” Animated UI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes fadeInUp { from { opacity:0; transform: translateY(12px); } to { opacity:1; transform: translateY(0); } }
    .fade-in-up { animation: fadeInUp 600ms ease forwards; }
    .card-glow { transition: all 300ms ease; }
  </style>
</head>
<body class="bg-gradient-to-br from-pink-50 via-purple-50 to-blue-50 min-h-screen">
  <%- include('partials/navbar') %>

  <main class="max-w-6xl mx-auto p-6">
    <!-- Add Movie Form -->
    <section id="add" class="mb-8">
      <div class="bg-white/60 backdrop-blur-md rounded-2xl p-6 shadow-lg border border-white/40">
        <h2 class="text-2xl font-bold text-indigo-700 mb-4">Add a Movie</h2>
        <form action="/add" method="post" enctype="multipart/form-data" class="grid md:grid-cols-4 gap-3 items-end">
          <input name="movieName" required placeholder="Movie name" class="md:col-span-1 p-3 rounded-lg border"/>
          <input name="director" required placeholder="Director" class="p-3 rounded-lg border"/>
          <input name="releaseYear" placeholder="Release Year" class="p-3 rounded-lg border"/>
          <input name="genre" placeholder="Genre" class="p-3 rounded-lg border"/>
          <input type="file" name="image" class="md:col-span-2"/>
          <button class="md:col-span-2 py-3 rounded-lg mt-2 bg-gradient-to-r from-indigo-500 to-pink-500 text-white font-semibold hover:scale-105 hover:shadow-xl transition-transform duration-300">Save Movie</button>
        </form>
      </div>
    </section>

    <!-- Movies Grid -->
    <section>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <% movieData.forEach(function(m, i){ %>
          <div class="fade-in-up card-glow bg-white/70 backdrop-blur-md rounded-2xl p-4 shadow-md hover:shadow-2xl transform hover:scale-105 transition-all duration-300" style="animation-delay:<%= i*60 %>ms">
            <% if (m.image) { %>
              <div class="h-56 rounded-xl overflow-hidden mb-3">
                <img src="<%= m.image %>" class="w-full h-full object-cover"/>
              </div>
            <% } else { %>
              <div class="h-56 rounded-xl overflow-hidden mb-3 bg-gradient-to-br from-indigo-300 to-pink-300 flex items-center justify-center text-white font-bold">No Image</div>
            <% } %>
            <h3 class="text-lg font-bold text-indigo-700"><%= m.movieName %> <span class="text-sm text-gray-600">(<%= m.releaseYear %>)</span></h3>
            <p class="text-sm text-gray-700">Director: <span class="font-medium"><%= m.director %></span></p>
            <p class="text-sm text-gray-700">Genre: <span class="font-medium"><%= m.genre || 'N/A' %></span></p>
            <div class="mt-4 flex gap-2">
              <a href="/edit/<%= m._id %>" class="flex-1 text-center py-2 rounded-lg bg-gradient-to-r from-indigo-500 to-pink-500 text-white font-semibold hover:brightness-105 transition">Edit</a>
              <form action="/delete" method="post" onsubmit="return confirm('Delete this movie?')" class="w-24">
                <input type="hidden" name="id" value="<%= m._id %>"/>
                <button class="w-full py-2 rounded-lg bg-red-500 text-white hover:bg-red-600 transition">Delete</button>
              </form>
            </div>
          </div>
        <% }) %>
      </div>
    </section>

    <%- include('partials/footer') %>
  </main>
</body>
</html>
